diff a/src/huginn/app/models/agent.rb b/src/huginn/app/models/agent.rb	(rejected hunks)
@@ -16,8 +17,7 @@ class Agent < ActiveRecord::Base
 
   attr_accessible :options, :memory, :name, :type, :schedule, :source_ids
 
-  serialize :options, JSONWithIndifferentAccess
-  serialize :memory, JSONWithIndifferentAccess
+  json_serialize :options, :memory
 
   validates_presence_of :name, :user
   validate :sources_are_owned
@@ -79,14 +79,6 @@ class Agent < ActiveRecord::Base
     # Implement me in your subclass to test for valid options.
   end
 
-  def options=(o)
-    self[:options] = ActiveSupport::HashWithIndifferentAccess.new(o)
-  end
-
-  def memory=(o)
-    self[:memory] = ActiveSupport::HashWithIndifferentAccess.new(o)
-  end
-
   def event_created_within?(days)
     last_event_at && last_event_at > days.to_i.days.ago
   end
